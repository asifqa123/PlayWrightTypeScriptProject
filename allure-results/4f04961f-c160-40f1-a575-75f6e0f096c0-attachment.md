# Test info

- Name: Test Case 5: Register User with existing email >> should display an error message when trying to register with an existing email
- Location: /app/tests/registerUserExistingEmail.spec.js:94:5

# Error details

```
Error: browserType.launch: Executable doesn't exist at /home/swebot/.cache/ms-playwright/chromium_headless_shell-1169/chrome-linux/headless_shell
╔═════════════════════════════════════════════════════════════════════════╗
║ Looks like Playwright Test or Playwright was just installed or updated. ║
║ Please run the following command to download new browsers:              ║
║                                                                         ║
║     npx playwright install                                              ║
║                                                                         ║
║ <3 Playwright Team                                                      ║
╚═════════════════════════════════════════════════════════════════════════╝
```

# Test source

```ts
   1 | // tests/registerUserExistingEmail.spec.js
   2 | const { test, expect } = require('@playwright/test');
   3 | const fs = require('fs');
   4 | const path = require('path');
   5 | const { HomePage } = require('../pages/HomePage');
   6 | const { LoginPage } = require('../pages/LoginPage');
   7 | const { SignupPage } = require('../pages/SignupPage');
   8 | const { Utils } = require('../utils/utils');
   9 |
   10 | // Load test data
   11 | const usersTestDataPath = path.join(__dirname, '..', 'test-data', 'users.json');
   12 | const usersTestData = JSON.parse(fs.readFileSync(usersTestDataPath, 'utf8'));
   13 | const userData = usersTestData.existingEmailUser;
   14 |
   15 | // Generate the specific email that will be "existing" for this test run
   16 | const existingEmail = Utils.generateRandomEmail(userData.emailPrefix);
   17 | const userNameForInitialRegistration = Utils.generateRandomName(userData.namePrefix);
   18 |
   19 | test.describe('Test Case 5: Register User with existing email', () => {
   20 |     let homePage; // Instance for general use
   21 |     let loginPage; // Instance for general use
   22 |     // No need for signupPage at describe scope as it's used within beforeAll contextually
   23 |
   24 |     test.beforeAll(async ({ browser }) => {
   25 |         const page = await browser.newPage(); // New page for setup
   26 |         const tempHomePage = new HomePage(page);
   27 |         const tempLoginPage = new LoginPage(page);
   28 |         const tempSignupPage = new SignupPage(page);
   29 |
   30 |         await tempHomePage.goto();
   31 |         await tempHomePage.clickSignupLoginLink();
   32 |         // Use the globally defined userNameForInitialRegistration and existingEmail
   33 |         await tempLoginPage.signup(userNameForInitialRegistration, existingEmail);
   34 |
   35 |         await tempSignupPage.fillAccountInformation(
   36 |             userData.title || 'Mr',
   37 |             userData.password,
   38 |             userData.dobDay,
   39 |             userData.dobMonth,
   40 |             userData.dobYear,
   41 |             false,
   42 |             false
   43 |         );
   44 |         await tempSignupPage.fillAddressInformation(
   45 |             userNameForInitialRegistration, // Use the generated name for this registration
   46 |             userData.lastName,
   47 |             userData.company,
   48 |             userData.address1,
   49 |             userData.address2 || '',
   50 |             userData.country,
   51 |             userData.state,
   52 |             userData.city,
   53 |             userData.zipcode,
   54 |             userData.mobileNumber
   55 |         );
   56 |         await tempSignupPage.clickCreateAccountButton();
   57 |         await expect(tempSignupPage.accountCreatedText).toBeVisible();
   58 |         await tempSignupPage.clickContinueButton();
   59 |
   60 |         // Ad handling and optional logout
   61 |         if (await page.locator('#ad_position_box').isVisible({timeout: 5000})) {
   62 |             await page.evaluate(() => {
   63 |                 const ad = document.getElementById('ad_position_box');
   64 |                 if (ad) ad.remove();
   65 |             });
   66 |         }
   67 |         try {
   68 |             await page.waitForSelector('a[href="/logout"]', { timeout: 10000 });
   69 |             await page.locator('a[href="/logout"]').click();
   70 |         } catch (e) {
   71 |             console.log("Logout link not found after initial registration for TC5 (beforeAll), proceeding as is.");
   72 |             await page.reload({ waitUntil: 'networkidle' }); // Try reloading if logout wasn't immediately available
   73 |              if (await page.locator('#ad_position_box').isVisible({timeout: 5000})) {
   74 |                 await page.evaluate(() => {
   75 |                     const ad = document.getElementById('ad_position_box');
   76 |                     if (ad) ad.remove();
   77 |                 });
   78 |             }
   79 |             if(await page.locator('a[href="/logout"]').isVisible()){ // Check again before clicking
   80 |                  await page.locator('a[href="/logout"]').click();
   81 |             } else {
   82 |                 console.log("Logout link still not found after reload for TC5 (beforeAll).");
   83 |             }
   84 |         }
   85 |         await page.close();
   86 |     });
   87 |
   88 |     test.beforeEach(async ({ page }) => {
   89 |         homePage = new HomePage(page);
   90 |         loginPage = new LoginPage(page);
   91 |         await homePage.goto();
   92 |     });
   93 |
>  94 |     test('should display an error message when trying to register with an existing email', async ({ page }) => {
      |     ^ Error: browserType.launch: Executable doesn't exist at /home/swebot/.cache/ms-playwright/chromium_headless_shell-1169/chrome-linux/headless_shell
   95 |         await expect(page).toHaveURL('https://automationexercise.com/');
   96 |         expect(await homePage.isSliderVisible()).toBe(true);
   97 |
   98 |         await homePage.clickSignupLoginLink();
   99 |         expect(await loginPage.isSignupFormVisible()).toBe(true);
  100 |
  101 |         // Attempt to sign up again with the SAME existingEmail, but a different name
  102 |         const newAttemptName = Utils.generateRandomName(userData.namePrefix + "NewAttempt");
  103 |         await loginPage.signup(newAttemptName, existingEmail);
  104 |
  105 |         const errorMessageElement = page.locator('.signup-form p[style="color: red;"]');
  106 |         await expect(errorMessageElement).toBeVisible({ timeout: 10000 });
  107 |         await expect(errorMessageElement).toHaveText('Email Address already exist!');
  108 |     });
  109 | });
  110 |
```