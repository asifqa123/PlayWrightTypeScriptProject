# Test info

- Name: Test Case 14: Place Order: Register while Checkout >> should complete order by registering during checkout
- Location: /app/tests/placeOrderRegisterWhileCheckout.spec.js:37:5

# Error details

```
Error: browserType.launch: Executable doesn't exist at /home/swebot/.cache/ms-playwright/chromium_headless_shell-1169/chrome-linux/headless_shell
╔═════════════════════════════════════════════════════════════════════════╗
║ Looks like Playwright Test or Playwright was just installed or updated. ║
║ Please run the following command to download new browsers:              ║
║                                                                         ║
║     npx playwright install                                              ║
║                                                                         ║
║ <3 Playwright Team                                                      ║
╚═════════════════════════════════════════════════════════════════════════╝
```

# Test source

```ts
   1 | // tests/placeOrderRegisterWhileCheckout.spec.js
   2 | const { test, expect } = require('@playwright/test');
   3 | const { HomePage } = require('../pages/HomePage');
   4 | const { ProductsPage } = require('../pages/ProductsPage');
   5 | const { CartPage } = require('../pages/CartPage');
   6 | const { LoginPage } = require('../pages/LoginPage'); // For the 'New User Signup!' part
   7 | const { SignupPage } = require('../pages/SignupPage'); // For account creation
   8 | const { CheckoutPage } = require('../pages/CheckoutPage');
   9 | const { PaymentPage } = require('../pages/PaymentPage');
   10 | const { Utils } = require('../utils/utils');
   11 |
   12 | // Load Test Data
   13 | const users = Utils.loadTestData('users.json');
   14 | const productsData = Utils.loadTestData('products.json');
   15 | const paymentData = Utils.loadTestData('formData.json').paymentDetails;
   16 |
   17 | const newUser = users.registerWhileCheckoutUser;
   18 | const productToOrder = productsData.addProductsToCart.products[0]; // Using the first product from this array
   19 |
   20 | test.describe('Test Case 14: Place Order: Register while Checkout', () => {
   21 |     let homePage, productsPage, cartPage, loginPage, signupPage, checkoutPage, paymentPage;
   22 |     const randomEmail = Utils.generateRandomEmail(newUser.emailPrefix);
   23 |     const randomName = Utils.generateRandomName(newUser.namePrefix);
   24 |
   25 |     test.beforeEach(async ({ page }) => {
   26 |         homePage = new HomePage(page);
   27 |         productsPage = new ProductsPage(page);
   28 |         cartPage = new CartPage(page);
   29 |         loginPage = new LoginPage(page);
   30 |         signupPage = new SignupPage(page);
   31 |         checkoutPage = new CheckoutPage(page);
   32 |         paymentPage = new PaymentPage(page);
   33 |
   34 |         await homePage.goto();
   35 |     });
   36 |
>  37 |     test('should complete order by registering during checkout', async ({ page }) => {
      |     ^ Error: browserType.launch: Executable doesn't exist at /home/swebot/.cache/ms-playwright/chromium_headless_shell-1169/chrome-linux/headless_shell
   38 |         // 1 & 2. Add product to cart
   39 |         await homePage.clickProductsLink();
   40 |         await productsPage.addProductToCartByName(productToOrder.name);
   41 |         await productsPage.clickContinueShopping(); // Or view cart link from modal
   42 |
   43 |         // 3. Click 'Cart' button
   44 |         await homePage.clickCartLink();
   45 |         await expect(page).toHaveURL(/.*view_cart/);
   46 |
   47 |         // 4. Verify Cart page is displayed
   48 |         expect(await cartPage.isShoppingCartVisible()).toBe(true);
   49 |
   50 |         // 5. Click Proceed To Checkout
   51 |         await cartPage.clickProceedToCheckout();
   52 |
   53 |         // 6. Click 'Register / Login' button on checkout modal
   54 |         // This modal appears if not logged in.
   55 |         await expect(page.locator(cartPage.registerLoginLink)).toBeVisible({ timeout: 10000 });
   56 |         await cartPage.clickRegisterLoginLinkInModal();
   57 |
   58 |         // 7. Fill all details in Signup and create account
   59 |         await loginPage.signup(randomName, randomEmail); // On login/signup page now
   60 |
   61 |         await signupPage.fillAccountInformation(
   62 |             newUser.title, newUser.password, newUser.dobDay, newUser.dobMonth, newUser.dobYear,
   63 |             newUser.newsletter, newUser.optin
   64 |         );
   65 |         await signupPage.fillAddressInformation(
   66 |             randomName, newUser.lastName, newUser.company, newUser.address1, newUser.address2,
   67 |             newUser.country, newUser.state, newUser.city, newUser.zipcode, newUser.mobileNumber
   68 |         );
   69 |         await signupPage.clickCreateAccountButton();
   70 |         await expect(signupPage.accountCreatedText).toBeVisible();
   71 |
   72 |         // 8. Verify 'ACCOUNT CREATED!' and click 'Continue' button
   73 |         await signupPage.clickContinueButton();
   74 |
   75 |         // 9. Verify 'Logged in as username' at top (might need ad handling)
   76 |         if (await page.locator('#ad_position_box').isVisible({ timeout: 5000 })) {
   77 |             await page.evaluate(() => {
   78 |                 const ad = document.getElementById('ad_position_box');
   79 |                 if (ad) ad.remove();
   80 |             });
   81 |         }
   82 |         try {
   83 |             await page.waitForSelector(`li a:has-text("Logged in as ${randomName}")`, { timeout: 10000 });
   84 |         } catch (e) {
   85 |             await page.reload({ waitUntil: 'networkidle' });
   86 |             if (await page.locator('#ad_position_box').isVisible({ timeout: 5000 })) {
   87 |                  await page.evaluate(() => {
   88 |                     const ad = document.getElementById('ad_position_box');
   89 |                     if (ad) ad.remove();
   90 |                 });
   91 |             }
   92 |             await page.waitForSelector(`li a:has-text("Logged in as ${randomName}")`, { timeout: 15000 });
   93 |         }
   94 |         await expect(page.locator(`li a:has-text("Logged in as ${randomName}")`)).toBeVisible();
   95 |
   96 |         // 10. Click 'Cart' button (again, to proceed with checkout as logged-in user)
   97 |         await homePage.clickCartLink();
   98 |
   99 |         // 11. Click 'Proceed To Checkout' button
  100 |         await cartPage.clickProceedToCheckout();
  101 |
  102 |         // 12. Verify Address Details and Review Your Order
  103 |         await expect(checkoutPage.addressDetailsText).toBeVisible();
  104 |         await expect(checkoutPage.reviewYourOrderText).toBeVisible();
  105 |         // Add more detailed address verification if needed, comparing with newUser data
  106 |
  107 |         // 13. Enter description in comment text area and click 'Place Order'
  108 |         await checkoutPage.enterComment("Order placed via automated test - Register while checkout.");
  109 |         await checkoutPage.clickPlaceOrder();
  110 |
  111 |         // 14. Enter payment details
  112 |         await paymentPage.fillPaymentDetails(
  113 |             paymentData.nameOnCard, // Or use randomName if it should match account holder
  114 |             paymentData.cardNumber,
  115 |             paymentData.cvc,
  116 |             paymentData.expiryMonth,
  117 |             paymentData.expiryYear
  118 |         );
  119 |
  120 |         // 15. Click 'Pay and Confirm Order' button
  121 |         await paymentPage.clickPayAndConfirmOrder();
  122 |
  123 |         // 16. Verify success message 'Your order has been placed successfully!'
  124 |         // The actual success message might differ, adjust selector/text in PaymentPage if needed
  125 |         // Based on PaymentPage.js, orderSuccessMessage = '#success_message .alert-success'
  126 |         // Let's assume the text is within this.
  127 |         // The site actually shows "Order Placed!" and then a congratulations message.
  128 |         // We'll check for the "Order Placed!" h2 tag.
  129 |         await expect(paymentPage.orderPlacedText).toBeVisible({ timeout: 15000 });
  130 |         // Optionally, check for "Congratulations! Your order has been confirmed!"
  131 |         // await expect(page.locator('p:text("Congratulations! Your order has been confirmed!")')).toBeVisible();
  132 |
  133 |
  134 |         // 17. Click 'Delete Account' button (Optional, but good for cleanup)
  135 |         // Navigate home first if not already there or if 'delete account' is on header
  136 |         await homePage.goto(); // To ensure header is fully loaded without payment page interference
  137 |          if (await page.locator('#ad_position_box').isVisible({ timeout: 5000 })) {
```