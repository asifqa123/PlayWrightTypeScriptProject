# Test info

- Name: Test Case 12: Add Products in Cart >> should add specified products to cart and verify them
- Location: /app/tests/addProductsInCart.spec.js:26:5

# Error details

```
Error: browserType.launch: Executable doesn't exist at /home/swebot/.cache/ms-playwright/chromium_headless_shell-1169/chrome-linux/headless_shell
╔═════════════════════════════════════════════════════════════════════════╗
║ Looks like Playwright Test or Playwright was just installed or updated. ║
║ Please run the following command to download new browsers:              ║
║                                                                         ║
║     npx playwright install                                              ║
║                                                                         ║
║ <3 Playwright Team                                                      ║
╚═════════════════════════════════════════════════════════════════════════╝
```

# Test source

```ts
   1 | // tests/addProductsInCart.spec.js
   2 | const { test, expect } = require('@playwright/test');
   3 | const { HomePage } = require('../pages/HomePage');
   4 | const { ProductsPage } = require('../pages/ProductsPage');
   5 | const { CartPage } = require('../pages/CartPage');
   6 | const { Utils } = require('../utils/utils');
   7 |
   8 | // Load product data
   9 | const productsTestData = Utils.loadTestData('products.json');
  10 | const productsToAdd = productsTestData.addProductsToCart.products;
  11 |
  12 | test.describe('Test Case 12: Add Products in Cart', () => {
  13 |     let homePage;
  14 |     let productsPage;
  15 |     let cartPage;
  16 |     let utils; // For page scrolling or other utilities if needed
  17 |
  18 |     test.beforeEach(async ({ page }) => {
  19 |         homePage = new HomePage(page);
  20 |         productsPage = new ProductsPage(page);
  21 |         cartPage = new CartPage(page);
  22 |         utils = new Utils(page);
  23 |         await homePage.goto();
  24 |     });
  25 |
> 26 |     test('should add specified products to cart and verify them', async ({ page }) => {
     |     ^ Error: browserType.launch: Executable doesn't exist at /home/swebot/.cache/ms-playwright/chromium_headless_shell-1169/chrome-linux/headless_shell
  27 |         // 1. Launch browser and navigate to URL (handled by beforeEach)
  28 |         // 2. Verify that home page is visible successfully
  29 |         await expect(page).toHaveURL('https://automationexercise.com/');
  30 |
  31 |         // 3. Click 'Products' button
  32 |         await homePage.clickProductsLink();
  33 |         await expect(page).toHaveURL('https://automationexercise.com/products');
  34 |         expect(await productsPage.isAllProductsVisible()).toBe(true);
  35 |
  36 |         // Store expected products for verification in cart
  37 |         const expectedProductsInCart = [];
  38 |
  39 |         // 4. Add first product to cart
  40 |         const firstProduct = productsToAdd[0];
  41 |         // Storing price from listing to verify in cart, though cart shows price per unit.
  42 |         const firstProductPriceFromListing = await productsPage.getProductPriceFromListing(firstProduct.name);
  43 |         await productsPage.addProductToCartByName(firstProduct.name);
  44 |         expectedProductsInCart.push({ ...firstProduct, quantity: 1, displayPrice: firstProductPriceFromListing });
  45 |
  46 |         // 5. Click 'Continue Shopping' button
  47 |         await productsPage.clickContinueShopping();
  48 |
  49 |         // 6. Add second product to cart
  50 |         const secondProduct = productsToAdd[1];
  51 |         const secondProductPriceFromListing = await productsPage.getProductPriceFromListing(secondProduct.name);
  52 |         await productsPage.addProductToCartByName(secondProduct.name);
  53 |         expectedProductsInCart.push({ ...secondProduct, quantity: 1, displayPrice: secondProductPriceFromListing });
  54 |
  55 |         // 7. Click 'View Cart' button (or link in modal, or navigate via header)
  56 |         // Assuming clickContinueShopping closes modal, then navigate via header link
  57 |         // If addProductToCartByName results in modal, and we want to view cart from there:
  58 |         // await page.locator(productsPage.viewCartLinkInModal).click();
  59 |         // For now, let's assume modal is closed by clickContinueShopping and we use header link
  60 |         await homePage.clickCartLink(); // Navigates to cart page
  61 |
  62 |         // 8. Verify both products are added to Cart
  63 |         await expect(page).toHaveURL(/.*view_cart/);
  64 |         expect(await cartPage.isShoppingCartVisible()).toBe(true);
  65 |
  66 |         const cartItemCount = await cartPage.getCartItemCount();
  67 |         // This needs to be specific to actual product rows, not just any <tr>
  68 |         // CartPage.getCartItemCount() gets all trs. For now, we'll check against expected product count.
  69 |         // A better way is to iterate through expectedProductsInCart and verify each one.
  70 |         expect(cartItemCount).toBeGreaterThanOrEqual(expectedProductsInCart.length);
  71 |
  72 |
  73 |         // 9. Verify their prices, quantity and total price
  74 |         for (const expectedProduct of expectedProductsInCart) {
  75 |             await expect(page.locator(`//td[@class='cart_description']//a[text()='${expectedProduct.name}']`)).toBeVisible();
  76 |
  77 |             // To get price, quantity, total, we need more specific selectors in CartPage.js
  78 |             // Example: find row by product name, then find other cells in that row.
  79 |             const productRow = page.locator(`//tr[contains(@id, 'product-')]//td[@class='cart_description']//a[text()='${expectedProduct.name}']/ancestor::tr`);
  80 |
  81 |             const cartPrice = await productRow.locator('.cart_price p').textContent();
  82 |             expect(cartPrice.trim()).toBe(expectedProduct.price); // Price from JSON
  83 |
  84 |             const cartQuantity = await productRow.locator('.cart_quantity .disabled').inputValue(); // Or .textContent() if not input
  85 |             expect(parseInt(cartQuantity)).toBe(expectedProduct.quantity);
  86 |
  87 |             const cartTotal = await productRow.locator('.cart_total p.cart_total_price').textContent();
  88 |             // Calculate expected total: price string "Rs. 500" -> number 500
  89 |             const priceNumber = parseInt(expectedProduct.price.replace('Rs. ', ''));
  90 |             const expectedTotalPriceString = `Rs. ${priceNumber * expectedProduct.quantity}`;
  91 |             expect(cartTotal.trim()).toBe(expectedTotalPriceString);
  92 |         }
  93 |     });
  94 | });
  95 |
```