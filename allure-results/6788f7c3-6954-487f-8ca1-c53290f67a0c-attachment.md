# Test info

- Name: Test Case 11: Verify Subscription in Cart page >> should subscribe with an email on the cart page and verify success message
- Location: /app/tests/verifyCartPageSubscription.spec.js:24:5

# Error details

```
Error: browserType.launch: Executable doesn't exist at /home/swebot/.cache/ms-playwright/chromium_headless_shell-1169/chrome-linux/headless_shell
╔═════════════════════════════════════════════════════════════════════════╗
║ Looks like Playwright Test or Playwright was just installed or updated. ║
║ Please run the following command to download new browsers:              ║
║                                                                         ║
║     npx playwright install                                              ║
║                                                                         ║
║ <3 Playwright Team                                                      ║
╚═════════════════════════════════════════════════════════════════════════╝
```

# Test source

```ts
   1 | // tests/verifyCartPageSubscription.spec.js
   2 | const { test, expect } = require('@playwright/test');
   3 | const { HomePage } = require('../pages/HomePage'); // To navigate to cart and for subscription elements if shared
   4 | const { CartPage } = require('../pages/CartPage'); // For cart page specific navigation/elements
   5 | const { Utils } = require('../utils/utils');
   6 |
   7 | // Load test data
   8 | const formData = Utils.loadTestData('formData.json');
   9 | const subscriptionData = formData.cartPageSubscription;
  10 |
  11 | test.describe('Test Case 11: Verify Subscription in Cart page', () => {
  12 |     let homePage; // Using HomePage for navigation and potentially shared footer elements
  13 |     let cartPage;
  14 |     let utils;
  15 |
  16 |     test.beforeEach(async ({ page }) => {
  17 |         homePage = new HomePage(page);
  18 |         cartPage = new CartPage(page);
  19 |         utils = new Utils(page);
  20 |         await homePage.goto(); // Go to home page first
  21 |         await homePage.clickCartLink(); // Navigate to Cart page
  22 |     });
  23 |
> 24 |     test('should subscribe with an email on the cart page and verify success message', async ({ page }) => {
     |     ^ Error: browserType.launch: Executable doesn't exist at /home/swebot/.cache/ms-playwright/chromium_headless_shell-1169/chrome-linux/headless_shell
  25 |         // 1. Launch browser and Navigate to Home URL (handled by homePage.goto() in beforeEach)
  26 |         // 2. Click 'Cart' button (handled by homePage.clickCartLink() in beforeEach)
  27 |         await expect(page).toHaveURL(/.*view_cart/); // Verify navigation to cart page
  28 |
  29 |         // 3. Scroll down to footer
  30 |         // Assuming subscription elements are the same as HomePage and accessible via homePage object
  31 |         // Or, if CartPage has its own footer element references, use those.
  32 |         // For this example, let's assume the subscription form in the footer is common
  33 |         // and its selectors are defined in HomePage.
  34 |         await utils.scrollToElement(homePage.subscriptionEmailInput);
  35 |
  36 |         // 4. Verify text 'SUBSCRIPTION'
  37 |         await expect(page.locator(homePage.subscriptionText)).toBeVisible();
  38 |
  39 |         // 5. Enter email address in input and click arrow button
  40 |         const emailToSubscribe = Utils.generateRandomEmail(subscriptionData.emailPrefix);
  41 |         await homePage.enterSubscriptionEmail(emailToSubscribe); // Using HomePage's method
  42 |         await homePage.clickSubscriptionButton(); // Using HomePage's method
  43 |
  44 |         // 6. Verify success message 'You have been successfully subscribed!' is visible
  45 |         const successMessageElement = page.locator(homePage.successAlert);
  46 |         await successMessageElement.waitFor({ state: 'visible', timeout: 10000 });
  47 |
  48 |         const actualSuccessMessage = await homePage.getSuccessSubscriptionMessage(); // Using HomePage's method
  49 |         expect(actualSuccessMessage.trim()).toBe(subscriptionData.expectedSuccessMessage);
  50 |         await expect(successMessageElement).toBeVisible();
  51 |     });
  52 | });
  53 |
```