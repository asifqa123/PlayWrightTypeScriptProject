# Test info

- Name: Test Case 1: Register User >> should register a new user, verify login, and delete account
- Location: /app/tests/registerUser.spec.js:30:5

# Error details

```
Error: browserType.launch: Executable doesn't exist at /home/swebot/.cache/ms-playwright/chromium_headless_shell-1169/chrome-linux/headless_shell
╔═════════════════════════════════════════════════════════════════════════╗
║ Looks like Playwright Test or Playwright was just installed or updated. ║
║ Please run the following command to download new browsers:              ║
║                                                                         ║
║     npx playwright install                                              ║
║                                                                         ║
║ <3 Playwright Team                                                      ║
╚═════════════════════════════════════════════════════════════════════════╝
```

# Test source

```ts
   1 | // tests/registerUser.spec.js
   2 | const { test, expect } = require('@playwright/test');
   3 | const fs = require('fs');
   4 | const path = require('path');
   5 | const { HomePage } = require('../pages/HomePage');
   6 | const { LoginPage } = require('../pages/LoginPage');
   7 | const { SignupPage } = require('../pages/SignupPage');
   8 | const { Utils } = require('../utils/utils');
   9 |
   10 | // Load test data
   11 | const usersTestDataPath = path.join(__dirname, '..', 'test-data', 'users.json');
   12 | const usersTestData = JSON.parse(fs.readFileSync(usersTestDataPath, 'utf8'));
   13 | const userData = usersTestData.registerUser;
   14 |
   15 | test.describe('Test Case 1: Register User', () => {
   16 |     let homePage;
   17 |     let loginPage;
   18 |     let signupPage;
   19 |     // Use dynamic email and name generation but other data from JSON
   20 |     const randomEmail = Utils.generateRandomEmail(userData.firstName.toLowerCase()); // Base email on first name from JSON
   21 |     const randomName = `${userData.firstName}${Utils.generateRandomString(4)}`; // Base name on first name from JSON
   22 |
   23 |     test.beforeEach(async ({ page }) => {
   24 |         homePage = new HomePage(page);
   25 |         loginPage = new LoginPage(page);
   26 |         signupPage = new SignupPage(page);
   27 |         await homePage.goto();
   28 |     });
   29 |
>  30 |     test('should register a new user, verify login, and delete account', async ({ page }) => {
      |     ^ Error: browserType.launch: Executable doesn't exist at /home/swebot/.cache/ms-playwright/chromium_headless_shell-1169/chrome-linux/headless_shell
   31 |         await expect(page).toHaveURL('https://automationexercise.com/');
   32 |         expect(await homePage.isSliderVisible()).toBe(true);
   33 |
   34 |         await homePage.clickSignupLoginLink();
   35 |         expect(await loginPage.isSignupFormVisible()).toBe(true);
   36 |         await expect(page.locator(loginPage.newUserSignupText)).toBeVisible();
   37 |
   38 |         // Use randomName (derived from JSON's firstName) and randomEmail for signup
   39 |         await loginPage.signup(randomName, randomEmail);
   40 |
   41 |         expect(await signupPage.isAccountInfoTextVisible()).toBe(true);
   42 |
   43 |         await signupPage.fillAccountInformation(
   44 |             userData.title,
   45 |             userData.password,
   46 |             userData.dobDay,
   47 |             userData.dobMonth,
   48 |             userData.dobYear,
   49 |             userData.newsletter,
   50 |             userData.optin
   51 |         );
   52 |
   53 |         await signupPage.fillAddressInformation(
   54 |             randomName, // Use the generated randomName for first name field
   55 |             userData.lastName,
   56 |             userData.company,
   57 |             userData.address1,
   58 |             userData.address2,
   59 |             userData.country,
   60 |             userData.state,
   61 |             userData.city,
   62 |             userData.zipcode,
   63 |             userData.mobileNumber
   64 |         );
   65 |
   66 |         await signupPage.clickCreateAccountButton();
   67 |         expect(await signupPage.isAccountCreatedVisible()).toBe(true);
   68 |         await expect(page.locator(signupPage.accountCreatedText)).toBeVisible();
   69 |
   70 |         await signupPage.clickContinueButton();
   71 |
   72 |         // Handle potential ad overlay
   73 |         if (await page.locator('#ad_position_box').isVisible({ timeout: 5000 })) {
   74 |             await page.evaluate(() => {
   75 |                 const ad = document.getElementById('ad_position_box');
   76 |                 if (ad) ad.remove();
   77 |             });
   78 |         }
   79 |
   80 |         try {
   81 |             await page.waitForSelector(`li a:has-text("Logged in as ${randomName}")`, { timeout: 10000 });
   82 |         } catch (e) {
   83 |             console.log("'Logged in as' not visible, attempting to refresh and check again.");
   84 |             await page.reload();
   85 |             await page.waitForSelector(`li a:has-text("Logged in as ${randomName}")`, { timeout: 15000 });
   86 |         }
   87 |         await expect(page.locator(`li a:has-text("Logged in as ${randomName}")`)).toBeVisible();
   88 |
   89 |         const deleteAccountLink = 'a[href="/delete_account"]';
   90 |         if (await page.locator('#ad_position_box').isVisible({ timeout: 5000 })) {
   91 |              await page.evaluate(() => {
   92 |                 const ad = document.getElementById('ad_position_box');
   93 |                 if (ad) ad.remove();
   94 |             });
   95 |         }
   96 |         await page.locator(deleteAccountLink).click();
   97 |
   98 |         const accountDeletedTextSelector = 'h2[data-qa="account-deleted"]';
   99 |         if (await page.locator('#ad_position_box').isVisible({ timeout: 5000 })) {
  100 |              await page.evaluate(() => {
  101 |                 const ad = document.getElementById('ad_position_box');
  102 |                 if (ad) ad.remove();
  103 |             });
  104 |         }
  105 |         await expect(page.locator(accountDeletedTextSelector)).toBeVisible({ timeout: 10000 });
  106 |
  107 |         const continueButtonAfterDeleteSelector = 'a[data-qa="continue-button"]';
  108 |         await page.locator(continueButtonAfterDeleteSelector).click();
  109 |
  110 |         await expect(page).toHaveURL('https://automationexercise.com/');
  111 |     });
  112 | });
  113 |
```