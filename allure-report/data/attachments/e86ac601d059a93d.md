# Test info

- Name: Test Case 20: Search Products and Verify Cart After Login >> should search, add to cart, login, and verify cart
- Location: /Users/asifuae1983/Desktop/AUTOMATION/PLAYWRIGHT/JulesNewPlayWrightProject/PlayWrightTypeScriptProject/tests/searchProductsAndVerifyCartAfterLogin.spec.ts:81:9

# Error details

```
Error: locator.click: Error: strict mode violation: locator('a[href="/login"]') resolved to 2 elements:
    1) <a href="/login">…</a> aka getByRole('link', { name: ' Signup / Login' })
    2) <a href="/login">…</a> aka locator('a').filter({ hasText: 'Register / Login' })

Call log:
  - waiting for locator('a[href="/login"]')

    at HomePage.clickSignupLoginLink (/Users/asifuae1983/Desktop/AUTOMATION/PLAYWRIGHT/JulesNewPlayWrightProject/PlayWrightTypeScriptProject/pages/HomePage.ts:92:36)
    at /Users/asifuae1983/Desktop/AUTOMATION/PLAYWRIGHT/JulesNewPlayWrightProject/PlayWrightTypeScriptProject/tests/searchProductsAndVerifyCartAfterLogin.spec.ts:106:24
```

# Page snapshot

```yaml
- banner:
  - link "Website for automation practice":
    - /url: /
    - img "Website for automation practice"
  - list:
    - listitem:
      - link " Home":
        - /url: /
    - listitem:
      - link " Products":
        - /url: /products
    - listitem:
      - link " Cart":
        - /url: /view_cart
    - listitem:
      - link " Signup / Login":
        - /url: /login
    - listitem:
      - link " Test Cases":
        - /url: /test_cases
    - listitem:
      - link " API Testing":
        - /url: /api_list
    - listitem:
      - link " Video Tutorials":
        - /url: https://www.youtube.com/c/AutomationExercise
    - listitem:
      - link " Contact us":
        - /url: /contact_us
- list:
  - listitem:
    - link "Home":
      - /url: /
  - listitem: Shopping Cart
- text: Proceed To Checkout
- table:
  - rowgroup:
    - row "Item Description Price Quantity Total":
      - cell "Item"
      - cell "Description"
      - cell "Price"
      - cell "Quantity"
      - cell "Total"
      - cell
  - rowgroup:
    - row "Product Image Blue Top Women > Tops Rs. 500 1 Rs. 500 ":
      - cell "Product Image":
        - link "Product Image":
          - /url: ""
          - img "Product Image"
      - cell "Blue Top Women > Tops":
        - heading "Blue Top" [level=4]:
          - link "Blue Top":
            - /url: /product_details/1
        - paragraph: Women > Tops
      - cell "Rs. 500":
        - paragraph: Rs. 500
      - cell "1":
        - button "1"
      - cell "Rs. 500":
        - paragraph: Rs. 500
      - cell ""
- contentinfo:
  - heading "Subscription" [level=2]
  - textbox "Your email address"
  - button ""
  - paragraph: Get the most recent updates from our site and be updated your self...
  - paragraph: Copyright © 2021 All rights reserved
```

# Test source

```ts
   1 | import { type Page, type Locator } from '@playwright/test';
   2 |
   3 | export class HomePage {
   4 |     readonly page: Page;
   5 |     readonly slider: Locator;
   6 |     readonly homeLink: Locator;
   7 |     readonly productsLink: Locator;
   8 |     readonly cartLink: Locator;
   9 |     readonly signupLoginLink: Locator;
   10 |     readonly testCasesLink: Locator;
   11 |     readonly apiTestingLink: Locator;
   12 |     readonly videoTutorialsLink: Locator;
   13 |     readonly contactUsLink: Locator;
   14 |     readonly subscriptionText: Locator;
   15 |     readonly subscriptionEmailInput: Locator;
   16 |     readonly subscriptionButton: Locator;
   17 |     readonly successAlert: Locator;
   18 |     readonly womenCategoryLink: Locator;
   19 |     readonly womenDressCategoryLink: Locator;
   20 |     readonly menCategoryLink: Locator;
   21 |     readonly menTshirtsCategoryLink: Locator;
   22 |     readonly categoryView: Locator;
   23 |     readonly recommendedItemsSection: Locator;
   24 |     readonly addedModal: Locator;
   25 |     readonly viewCartLinkInModal: Locator;
   26 |     readonly deleteAccountLink: Locator;
   27 |     readonly logoutLink: Locator;
   28 |     readonly accountDeletedText: Locator;
   29 |     readonly deleteContinueButton: Locator;
   30 |     readonly scrollUpArrowButton: Locator;
   31 |     readonly fullFledgedText: Locator;
   32 |
   33 |     constructor(page: Page) {
   34 |         this.page = page;
   35 |         this.slider = page.locator('#slider');
   36 |         this.homeLink = page.locator('a[href="/"]');
   37 |         this.productsLink = page.locator('a[href="/products"]');
   38 |         this.cartLink = page.locator('.shop-menu a[href="/view_cart"]');
   39 |         this.signupLoginLink = page.locator('a[href="/login"]');
   40 |         this.testCasesLink = page.locator('a.test_cases_list[href="/test_cases"]');
   41 |         this.apiTestingLink = page.locator('a[href="/api_testing"]');
   42 |         this.videoTutorialsLink = page.locator('a[href="https://www.youtube.com/c/AutomationExercise"]');
   43 |         this.contactUsLink = page.locator('a[href="/contact_us"]');
   44 |         this.subscriptionText = page.locator('h2:has-text("Subscription")');
   45 |         this.subscriptionEmailInput = page.locator('#subscribe_email');
   46 |         this.subscriptionButton = page.locator('#subscribe');
   47 |         this.successAlert = page.locator('#success-subscribe');
   48 |         this.womenCategoryLink = page.locator("a[href='#Women']");
   49 |         this.womenDressCategoryLink = page.locator("a[href='/category_products/1']");
   50 |         this.menCategoryLink = page.locator("a[href='#Men']");
   51 |         this.menTshirtsCategoryLink = page.locator("a[href='/category_products/3']");
   52 |         this.categoryView = page.locator(".left-sidebar h2:has-text('Category')");
   53 |         this.recommendedItemsSection = page.locator('.recommended_items');
   54 |         this.addedModal = page.locator('.modal-content');
   55 |         this.viewCartLinkInModal = page.locator('.modal-body a[href="/view_cart"]');
   56 |         this.deleteAccountLink = page.locator('a[href="/delete_account"]');
   57 |         this.logoutLink = page.locator('a[href="/logout"]');
   58 |         this.accountDeletedText = page.locator('h2[data-qa="account-deleted"]');
   59 |         this.deleteContinueButton = page.locator('a[data-qa="continue-button"]');
   60 |         this.scrollUpArrowButton = page.locator('#scrollUp');
   61 |         this.fullFledgedText = page.locator('//div[@class="item active"]//h2[contains(text(),"Full-Fledged practice website")]');
   62 |     }
   63 |
   64 |     // Get all currently active recommended item cards
   65 |     private getActiveRecommendedItemCards(): Locator {
   66 |         // Assuming recommended items are within an active carousel slide, and each product is in a 'col-sm-4'
   67 |         // This might need adjustment if the structure is different (e.g. no 'col-sm-4' or if '.item.active' is not the direct parent)
   68 |         return this.recommendedItemsSection.locator('.item.active .single-products'); // .single-products is a common wrapper too.
   69 |     }
   70 |
   71 |     // Returns a Locator for the name of a specific recommended item by its display index
   72 |     getRecommendedItemNameLocator(index: number): Locator {
   73 |         // Assuming the name is the first direct child <p> of .productinfo
   74 |         return this.getActiveRecommendedItemCards().nth(index).locator('.productinfo > p').first();
   75 |     }
   76 |
   77 |     // Returns a Locator for the add-to-cart button of a specific recommended item
   78 |     getRecommendedItemAddToCartButtonLocator(index: number): Locator {
   79 |         // Targeting the add-to-cart button within productinfo (not the overlay one for recommended items usually)
   80 |         return this.getActiveRecommendedItemCards().nth(index).locator('.productinfo a.add-to-cart');
   81 |     }
   82 |
   83 |     loggedInAsTextSelector(username: string): string { // Renamed for clarity
   84 |         return `li a:has-text('Logged in as ${username}')`;
   85 |     }
   86 |
   87 |     async goto(): Promise<void> {
   88 |         await this.page.goto('https://automationexercise.com/');
   89 |     }
   90 |
   91 |     async clickSignupLoginLink(): Promise<void> {
>  92 |         await this.signupLoginLink.click();
      |                                    ^ Error: locator.click: Error: strict mode violation: locator('a[href="/login"]') resolved to 2 elements:
   93 |     }
   94 |
   95 |     async clickProductsLink(): Promise<void> {
   96 |         await this.productsLink.click();
   97 |     }
   98 |
   99 |     async clickCartLink(): Promise<void> {
  100 |         await this.cartLink.click();
  101 |     }
  102 |
  103 |     async clickTestCasesLink(): Promise<void> {
  104 |         await this.testCasesLink.first().click();
  105 |     }
  106 |
  107 |     async clickContactUsLink(): Promise<void> {
  108 |         await this.contactUsLink.click();
  109 |     }
  110 |
  111 |     async enterSubscriptionEmail(email: string): Promise<void> {
  112 |         await this.subscriptionEmailInput.fill(email);
  113 |     }
  114 |
  115 |     async clickSubscriptionButton(): Promise<void> {
  116 |         await this.subscriptionButton.click();
  117 |     }
  118 |
  119 |     async getSuccessSubscriptionMessage(): Promise<string | null> {
  120 |         return await this.successAlert.textContent();
  121 |     }
  122 |
  123 |     async subscribeToNewsletter(email: string): Promise<void> {
  124 |         const footerLocator = this.page.locator('footer'); // Assuming footer contains the subscription form
  125 |         await footerLocator.waitFor({ state: 'visible', timeout: 7000 });
  126 |
  127 |         await this.subscriptionText.scrollIntoViewIfNeeded(); 
  128 |         await this.subscriptionText.waitFor({ state: 'visible', timeout: 7000 }); 
  129 |
  130 |         await this.subscriptionEmailInput.waitFor({ state: 'visible', timeout: 7000 }); 
  131 |         await this.subscriptionEmailInput.waitFor({ state: 'enabled', timeout: 3000 }); 
  132 |         await this.subscriptionEmailInput.fill(email);
  133 |         await this.subscriptionButton.click();
  134 |     }
  135 |
  136 |     async isSliderVisible(): Promise<boolean> {
  137 |         return await this.slider.isVisible();
  138 |     }
  139 |
  140 |     async areCategoriesVisible(): Promise<boolean> {
  141 |         return await this.categoryView.isVisible();
  142 |     }
  143 |
  144 |     async clickWomenCategoryLink(): Promise<void> {
  145 |         await this.womenCategoryLink.click();
  146 |     }
  147 |
  148 |     async clickWomenDressCategoryLink(): Promise<void> {
  149 |         await this.womenDressCategoryLink.click();
  150 |     }
  151 |
  152 |     async clickMenCategoryLink(): Promise<void> {
  153 |         await this.menCategoryLink.click();
  154 |     }
  155 |
  156 |     async clickMenTshirtsCategoryLink(): Promise<void> {
  157 |         await this.menTshirtsCategoryLink.click();
  158 |     }
  159 |
  160 |     async scrollToBottom(): Promise<void> {
  161 |         await this.page.evaluate(() => window.scrollTo(0, document.body.scrollHeight));
  162 |     }
  163 |
  164 |     async isRecommendedItemsVisible(): Promise<boolean> {
  165 |         const recommendedItems = this.recommendedItemsSection; // Use the Locator property
  166 |         await recommendedItems.scrollIntoViewIfNeeded();
  167 |         return await recommendedItems.isVisible();
  168 |     }
  169 |
  170 |     async getRecommendedItemName(index: number): Promise<string | null> {
  171 |         return await this.getRecommendedItemNameLocator(index).textContent();
  172 |     }
  173 |
  174 |     async addRecommendedItemToCart(index: number): Promise<string | null> {
  175 |         const itemName = await this.getRecommendedItemName(index);
  176 |         await this.getRecommendedItemAddToCartButtonLocator(index).click();
  177 |         await this.addedModal.waitFor({ state: 'visible', timeout: 5000 });
  178 |         return itemName;
  179 |     }
  180 |
  181 |     async clickViewCartModalLink(): Promise<void> {
  182 |         await this.addedModal.waitFor({ state: 'visible', timeout: 5000 });
  183 |         await this.viewCartLinkInModal.click();
  184 |         await this.addedModal.waitFor({ state: 'hidden', timeout: 5000 });
  185 |     }
  186 |
  187 |     async isLoggedInAsVisible(username: string): Promise<boolean> {
  188 |         return await this.page.locator(this.loggedInAsTextSelector(username)).isVisible();
  189 |     }
  190 |
  191 |     async clickDeleteAccountLink(): Promise<void> {
  192 |         await this.deleteAccountLink.click();
```